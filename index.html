<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="sources/_icon." />
    <script src="script.js"></script>
    <title>AMStore</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

        * {
            margin: 0;
            font-family: "Montserrat", sans-serif;
            color: white;
            transition: ease 0.2s;
        }

        body {
            height: 100%;
            background: linear-gradient(45deg, #7a68c7, #606397) no-repeat center center fixed;
            background-size: cover;
        }

        header {
            display: flex;
            align-items: center;
            font-size: 20px;
            background: linear-gradient(45deg, #7a51a8, #4b26a7);
            padding: 10px 10px 10px 20px;
            box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            font-weight: 500;
            height: 50px !important;
        }

        #main-container {
        }

        #info {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            --trans: 20%;
            background: linear-gradient(45deg, rgba(122, 81, 168, var(--trans)), rgba(75, 38, 167, var(--trans)));
            margin: 20px;
            border-radius: 20px;
            -box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

            #info input {
                color: black;
            }

            #info img {
                border-radius: 25px;
                box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
                height: 200px;
                width: 300px;
                margin: 30px;
            }

        #product-container {
            display: flex;
            align-items: center;
            justify-content: center;
            --trans: 40%;
            background: linear-gradient(45deg, rgba(122, 81, 168, var(--trans)), rgba(75, 38, 167, var(--trans)));
            margin: 30px;
            padding: 25px;
            border: 0;
            border-radius: 25px;
            flex-wrap: wrap;
        }

        #confirm-menu {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            --trans: 70%;
            background: linear-gradient(45deg, rgba(122, 81, 168, var(--trans)), rgba(75, 38, 167, var(--trans)));
            width: 600px;
            height: 300px;
            padding: 25px;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border-radius: 20px;
        }

            #confirm-menu * {
                margin: 0 0 20px 0;
            }

            #confirm-menu button {
                border: 0;
                border-radius: 20px;
                width: 44%;
                height: 50%;
                margin: 10px;
                background: #b26dd6;
            }

                #confirm-menu button:hover {
                    background: #d8b0ed;
                }

        .product {
            background: linear-gradient(45deg, #7a51a8, #4b26a7);
            box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            height: 300px;
            width: 360px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: none;
            border-radius: 20px;
            padding: 20px;
            margin: 15px;
        }

            .product * {
                padding: 0 0 5px 0;
                text-align: center;
            }

            .product img {
                height: 45%;
                width: 58%;
                border-radius: 20px;
                box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
                border: 0;
            }

            .product h1 {
                font-size: 20px;
            }

            .product button p {
                padding: 0;
            }

            .product button, .okBtn {
                border: none;
                background: #7a51a8C0;
                height: 15%;
                width: 80%;
                border-radius: 20px;
                justify-content: center;
                align-items: center;
                text-align: center;
            }

                .product button:hover, .okBtn {
                    background: #7a51a8;
                    transform: scale(1.1, 1.1);
                }

        #not {
            background: linear-gradient(45deg, #7a51a850, #4b26a750);
        }

            #not button {
                display: none;
            }

        @media only screen and (max-width: 568px) {
            .header {
                background-color: #257965 !important;
            }
        }

        @media screen and (max-width: 399px) {
            header {
                font-weight: 500;
                font-size: 40px;
                height: 65px !important;
                color: blue;
            }

            .product {
                height: 15vh;
                width: 25vw;
            }
        }
    </style>
</head>
<body>
    <header>
        AM Store
    </header>

    <div id="main-container">
        <div id="info">
            <h1>Все, что хотите здесь!</h1>
            <p>
                Выбирай то, что хочешь, отправляй заявку и в скором времени я передам тебе твой товар. Только не забудь деньги! :D
                Отказаться от своей заявки можно, написав на номер +77076034858, деньги передаем СТРОГО при встрече, т.к не гарантирую наличие товара
            </p>
            <p>Свой ФИО и номер вводить обязательно (формат номера - 77007007070)</p>
            <div>
                <input id="name-input" value="" placeholder="ФИО" />
                <input id="phone-input" type="number" min="1" value="" placeholder="Номер" />
            </div>
            <!--img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y29tcHV0ZXIlMjBzaG9wfGVufDB8fDB8fHww" alt="get started" /-->
        </div>
        <h2 style="display:flex;align-items:center; justify-content:center;">Готовые продукты</h2>
        <div id="product-container">

            <div id="confirm-menu">
                <h1>Подтвердите заявку</h1>
                <p id="confirm-menu-p">Name, price</p>
                <textarea id="dreams-input" placeholder="Пожелания (можно оставить пустым)" style="color:black;"></textarea>
                <div style="width:80%; height:20%; display:flex; justify-content:center; align-items:center;">
                    <button onclick="hideConfirmMenu(true)">ДА</button>
                    <button onclick="hideConfirmMenu(false)">НЕТ</button>
                </div>
            </div>

            <div class="product" id="no">
                <img src="1.png" alt="product" />
                <h1>Гриша</h1>
                <div>
                    <p>650тг</p>
                </div>
                <button onclick="showConfirmMenu('Гриша - 650тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="2.png" alt="product" />
                <h1>Сатору Годжо</h1>
                <div>
                    <p>1000тг</p>
                </div>
                <button onclick="showConfirmMenu('Сатору Годжо - 1000тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="3.png" alt="product" />
                <h1>Воздушный спиннер</h1>
                <div>
                    <p>300тг</p>
                </div>
                <button onclick="showConfirmMenu('Воздушный спиннер - 300тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="4.png" alt="product" />
                <h1>Фиджет кольцо</h1>
                <div>
                    <p>200тг</p>
                </div>
                <button onclick="showConfirmMenu('Фиджет кольцо - 200тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="5.png" alt="product" />
                <h1>Кубик рубика скоростной</h1>
                <div>
                    <p>3000тг</p>
                </div>
                <button onclick="showConfirmMenu('Кубик рубика - 3000тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="6.png" alt="product" />
                <h1>Хонсе</h1>
                <div>
                    <p>500тг</p>
                </div>
                <button onclick="showConfirmMenu('Хонсе - 500тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="7.png" alt="product" />
                <h1>Акулка гибкая</h1>
                <div>
                    <p>250тг</p>
                </div>
                <button onclick="showConfirmMenu('Акула - 250тг')"><p>Отправить заявку</p></button>
            </div>

            <div class="product" id="no">
                <img src="8.png" alt="product" />
                <h1>Светильник `Ядерный взрыв`</h1>
                <div>
                    <p>2500тг</p>
                </div>
                <button onclick="showConfirmMenu('Светильник `Ядерный взрыв` - 2500тг')"><p>Отправить заявку</p></button>
            </div>

        </div>

        <h2 style="display:flex; align-items:center; justify-content:center;">Заказать</h2>
        <div id="product-container">
            <div style="display: flex; align-items: center; justify-content: center; flex-direction: column;">
                <h1 style="display: flex; align-items: center; justify-content: center;">Заказать модель</h1>
                <textarea id="order-inp" placeholder="Заказ..." style="color: black; width: 60vw; height: 30vh; margin: 10px;"></textarea>
                <p>Позже я свяжусь с вами и озвучу стоимость</p>
                <button class="okBtn" style="display: flex; height: 5vh; margin: 20px; " onclick="sendMessage(`${document.getElementById('order-inp').value}`)">ПОДТВЕРДИТЬ</button>
            </div>
        </div>
    </div>

    <!--
        <div class="product">
    <img src="" alt="product" />
    <h1></h1>
    <div>
        <p></p>
    </div>
    <button onclick="//showConfirmMenu('N.P')"><p>Отправить заявку</p></button>
    </div> -->

    <script>
        const confirmMenu = document.getElementById("confirm-menu");
        const confirmMenuProduct = document.getElementById("confirm-menu-p");
        const dreams = document.getElementById("dreams-input");

        const orderMenu = document.getElementById('order-inp');

        function showConfirmMenu(product) {
            //hideConfirmMenu(false);
            confirmMenuProduct.textContent = product;
            confirmMenu.style.display = "flex";
        }
        function hideConfirmMenu(isBuy) {
            isBuy ? sendMessage(confirmMenuProduct.textContent) : confirmMenu.style.display = "none";
            confirmMenu.style.display = "none";
        }

        function sendMessage(mess) {
            const phoneNum = document.getElementById("phone-input").value;
            const username = document.getElementById("name-input").value;
            if (isValidPhoneNumber(phoneNum) && username != "" && mess != "") {
                const botToken = '7825993060:AAHJc1ZXK8Y88Hztp3JQKcZJR7yaeyRDuvk';
                const chatId = '5576471464';

                //(t == 0) ? message = `${mess} - ${username} - ${phoneNum} - ${dreams.value}` : message = `${orderMenu.value} - ${username} - ${phoneNum} - ${dreams.value}`
                message = `${mess} - ${username} - ${phoneNum} - ${dreams.value}`;

                const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

                dreams.value = "";

                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        if (data.ok) {
                            alert("Заявка отправлена!");
                        } else {
                            alert("Ошибка отправки");
                        }
                    })
                    .catch(error => {
                        console.error("Ошибка:", error);
                        alert(`ERROR: ${error}`);
                    });
            }
            else {
                alert("Что-то не введено");
            }
        }

        function isValidPhoneNumber(phoneNum) {
            // Регулярное выражение для проверки формата номера
            const regex = /^7\d{10}$/;

            // Проверка: номер не null и не пустая строка, а также соответствует регулярному выражению
            if (phoneNum != null && phoneNum !== "" && regex.test(phoneNum)) {
                return true; // Номер действителен
            } else {
                return false; // Номер недействителен
            }
        }
    </script>
</body>
</html>
