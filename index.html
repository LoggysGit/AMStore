<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="sources/_icon." />
    <script src="script.js"></script>
    <title>AMStore</title>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap');

        * {
            margin: 0;
            font-family: "Montserrat", sans-serif;
            color: white;
            transition: ease 0.2s;
        }

        body {
            height: 100%;
            background: linear-gradient(45deg, #7a68c7, #606397) no-repeat center center fixed;
            background-size: cover;
        }

        header {
            display: flex;
            align-items: center;
            font-size: 20px;
            background: linear-gradient(45deg, #7a51a8, #4b26a7);
            padding: 10px 10px 10px 20px;
            box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            font-weight: 500;
            height: 50px !important;
        }

        #main-container {
        }

        #info {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            --trans: 20%;
            background: linear-gradient(45deg, rgba(122, 81, 168, var(--trans)), rgba(75, 38, 167, var(--trans)));
            margin: 20px;
            border-radius: 20px;
            -box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            padding:20px;
        }
        #info input{
            color:black;
        }
        #info img{
                            border-radius: 25px;
                box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            height: 200px;
            width:300px;
            margin:30px;
        }

        #product-container {
            display: flex;
            align-items: center;
            justify-content: center;
            --trans: 40%;
            background: linear-gradient(45deg, rgba(122, 81, 168, var(--trans)), rgba(75, 38, 167, var(--trans)));
            margin:30px;
            padding:25px;
            border:0;
            border-radius:25px;
        }

        #confirm-menu {
            position: fixed;
            --trans: 70%;
            background: linear-gradient(45deg, rgba(122, 81, 168, var(--trans)), rgba(75, 38, 167, var(--trans)));
            width: 600px;
            height: 300px;
            padding: 25px;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border-radius: 20px;
        }
        #confirm-menu *{
            margin:0 0 20px 0;
        }
        #confirm-menu button{
            border:0;
            border-radius: 20px;
            width:44%;
            height:50%;
            margin:10px;
            background:#b26dd6;
        }
         #confirm-menu button:hover{
             background:#d8b0ed;
         }

        .product {
            background: linear-gradient(45deg, #7a51a8, #4b26a7);
            box-shadow: 10px 0px 10px rgba(0, 0, 0, 0.2);
            height: 200px;
            width: 13vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: none;
            border-radius: 20px;
            padding:20px;
        }

            .product * {
                padding: 0 0 5px 0;
            }

            .product img {
                height: 40%;
            }

            .product p {
            }

            .product button p {
                padding:0;
            }

            .product button {
                border: none;
                background: #7a51a8C0;
                height: 15%;
                width:80%;
                border-radius: 20px;
                justify-content: center;
                align-items: center;
                text-align: center;
            }

                .product button:hover {
                    background: #7a51a8;
                    transform: scale(1.1, 1.1);
                }

        @media only screen and (max-width: 568px) {
            .header {
                background-color: #257965 !important;
            }
        }

        @media screen and (max-width: 399px) {
            header {
                font-weight: 500;
                font-size: 40px;
                height: 65px !important;
                color:blue;
            }

            .product {
                height: 15vh;
                width: 25vw;
            }
        }
    </style>
</head>
<body>
    <header>
        AM Store
    </header>

    <div id="main-container">
        <div id="info">
            <h1>Все, что хотите здесь!</h1>
            <p>Выбирай то, что хочешь, отправляй заявку и в скором времени я передам тебе твой товар. Только не забудь деньги! :D 
            Отказаться от своей заявки можно, написав на номер +77076034858, деньги передаем СТРОГО при встрече, т.к не гарантирую наличие товара</p>
            <p>Свой ФИО и номер вводить обязательно (формат номера - 77007007070)</p>
            <div>
                <input id="name-input" value="" placeholder="ФИО" />
                <input id="phone-input" type="number" min="1" value="" placeholder="Номер" />
            </div>
            <!--img src="https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y29tcHV0ZXIlMjBzaG9wfGVufDB8fDB8fHww" alt="get started" /-->
        </div>
        <div id="product-container">

            <div id="confirm-menu">
                <h1>Подтвердите заявку</h1>
                <p id="confirm-menu-p">Name, price</p>
                <div style="width:80%; height:20%; display:flex; justify-content:center; align-items:center;">
                    <button onclick="hideConfirmMenu(true)">ДА</button>
                    <button onclick="hideConfirmMenu(false)">НЕТ</button>
                </div>
            </div>
            
            <div class="product">
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAMAAzAMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQcIBv/EAB0QAQAABgMAAAAAAAAAAAAAAAABBzd0scEDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A9bIannXuOXLRGdyGp517jly0QAAAAARQQUABAUAAABFQAVAVFAAQByXNioft3GoOtIuSpsVD9u41AG5SGp517jly0Rnchqede45ctEBFiAJBQAAAAAAAAAABIqAIKAAAAAkXJU2Kh+3cag62clTYqH7dxqANxkNTzr3HLlojO5DU869xy5aIAAAAAAAAAAAAAAAAAAAAAAA5KmxUP27jUHWkXJU2Kh+3cagDcZDU869xy5aIzyQ1POvccuWiAAAAAIoAAAAAAAAAAAAAAAABFyVNioft3GoOtYuSpsVD9u41AG4SGp517jly0Rnkhqede45ctEAAAAAAAAAAAAAAAAAAAAAABIuSpsVD9u41B1rFyVNioft3GoA3KQ1POvccuWiM7kNTzr3HLlogAAAAAAAAAAAAAAAAAAAAAADkqbFQ/buNQdaRclTYqH7dxqANykNTzr3HLlojO5DU869xy5aIAAAAAAAAAAAAAAAAAACKigAAkXJU2Kh+3cag61clTYqH7dxqANykNTzr3HLlojO5DU869xy5aIAkFAAAAAAAAAAAAAAABABRAIKkFBHJc2Kh+3cag60i5KmxUP27jUAblIannXuOXLRGdyGp517jly0QAAAAAAAAAAAAAAAAAAAAAAEi5KmxUP27jUHWrkubFQ/buNQBuEhqede45ctEZ3IannXuOXLRAUEBQABFAAABAUAARQAAEAFEUAAEclzYqH7dxqDrRyXNioft3GoA3CQ1POvccuWiM8kNTzr3HLlogIoAAAAAAAIoAIoAAIoACKCKACKRBHJU2Kh+3cag61clzYqH7dxqANxkNTzr3HLlojO5DU869xy5aICKigAAAAAAAAAAigACAogCgAAgEXJU2Kh+3cag61clzYqH7dxqAP/Z" alt="product" />
                <h1>Name</h1>
                <div>
                    <p>PriceT</p>
                    <!--input type="number" min="1" value="1" placeholder="Кол-во" /-->
                </div>
                <button onclick="showConfirmMenu('N.P')"><p>Отправить заявку</p></button>
            </div>

        </div>
    </div>

    <script>
        const confirmMenu = document.getElementById("confirm-menu");
        const confirmMenuProduct = document.getElementById("confirm-menu-p");
        function showConfirmMenu(product) {
            hideConfirmMenu(false);
            confirmMenuProduct.textContent = product;
            confirmMenu.style.display = "flex";
        }
        function hideConfirmMenu(isBuy){
            isBuy ? sendMessage(confirmMenuProduct.textContent) : confirmMenu.style.display="none";
            confirmMenu.style.display = "none";
        }

        function sendMessage(mess) {
            const phoneNum = document.getElementById("phone-input").value;
            const username = document.getElementById("name-input").value;
            if (isValidPhoneNumber(phoneNum) || username != "") {
                const botToken = '7825993060:AAHJc1ZXK8Y88Hztp3JQKcZJR7yaeyRDuvk';
                const chatId = '5576471464';

                message = `${mess}-${username}-${phoneNum}`;

                const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

                fetch(url)
                    .then(response => response.json())
                    .then(data => {
                        if (data.ok) {
                            alert("Товар отправлен!");
                        } else {
                            alert("Ошибка отправки сообщения");
                        }
                    })
                    .catch(error => {
                        console.error("Ошибка:", error);
                        alert(`ERROR: ${error}`);
                    });
            }
            else {
                alert("Име или номер не введен или введен неправильно");
            }
        }

        function isValidPhoneNumber(phoneNum) {
            // Регулярное выражение для проверки формата номера
            const regex = /^7\d{10}$/;

            // Проверка: номер не null и не пустая строка, а также соответствует регулярному выражению
            if (phoneNum != null && phoneNum !== "" && regex.test(phoneNum)) {
                return true; // Номер действителен
            } else {
                return false; // Номер недействителен
            }
        }
    </script>
</body>
</html>
